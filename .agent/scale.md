# ขอบเขตงานระบบยืมคืนกุญแจห้องปฏิบัติการคอมพิวเตอร์

## 1. ภาพรวมระบบ
ระบบนี้เป็นเว็บไซต์สำหรับ **การจองและยืมคืนกุญแจห้องปฏิบัติการคอมพิวเตอร์** เพื่อใช้เปิดห้องเรียน/ห้องแล็บ โดยควบคุมสิทธิ์ตามบทบาทผู้ใช้ และลดปัญหาการจองซ้ำ การใช้ห้องผิดเวลา และการติดตามกุญแจไม่ครบ

สิ่งที่ถูกยืมในระบบคือ **"กุญแจห้อง"** ไม่ใช่ตัวห้องโดยตรง การใช้งานห้องจะเกิดขึ้นได้ก็ต่อเมื่อผู้ใช้มารับกุญแจและทำการ Check-in ในระบบ

---

## 2. สิ่งที่ยืม (Borrowed Item)
### 2.1 กุญแจห้อง (Key)
กุญแจเป็นทรัพยากรหลักของระบบ โดยแต่ละกุญแจผูกกับห้อง 1 ห้อง

ข้อมูลของกุญแจประกอบด้วย
- รหัสกุญแจ (Key ID)
- ห้องที่กุญแจใช้เปิด
- สถานะกุญแจ
  - ว่าง (Available)
  - ถูกยืม (Borrowed)
  - สูญหาย / ชำรุด (Lost / Damaged)
- ผู้ที่ถือกุญแจอยู่ปัจจุบัน (ถ้ามี)

การใช้งานห้องจะถือว่าเริ่มต้นเมื่อผู้ใช้ **รับกุญแจและ Check-in** และสิ้นสุดเมื่อ **Check-out และคืนกุญแจ**

---

## 3. บทบาทผู้ใช้งาน (Roles)
### 3.1 ผู้ดูแลระบบ (Admin)
- จัดการข้อมูลห้องและกุญแจ
- กำหนดตารางสอน (In-class schedule)
- จัดการรายวิชา กลุ่มเรียน และอาจารย์
- สมัครและจัดการบัญชีอาจารย์ (Teacher)
- สมัครและจัดการบัญชีนักศึกษา (Student) โดยสามารถเพิ่มไฟล์ excel ได้ user คือ รหัสนักศึกษา พาสเวิร์ดคือ รหัสนักศึกษา มีชื่อ นามสกุล
- ทำหน้าที่รับ-จ่ายกุญแจ และยืนยันการคืนกุญแจ
- จัดการผู้ใช้งานและสิทธิ์
- ดูรายงานภาพรวมการใช้งาน

### 3.2 อาจารย์ (Teacher)
- บัญชีอาจารย์ต้องถูกสร้างโดย Admin เท่านั้น
- ล็อกอินด้วยอีเมล และวันเดือนปีเกิด (ค.ศ.)
- จองกุญแจ/ห้องนอกตารางเรียน (Ad-hoc)
- อนุมัติหรือปฏิเสธคำขอจองของนักศึกษา
- Check-in / Check-out กุญแจได้ด้วยตนเอง

### 3.3 นักศึกษา (Student)
- นักศึกษาไม่ต้องสมัครสมาชิก
- ใช้รหัสนักศึกษา 11 หลัก (ไม่ซ้ำกัน)
- สามารถเปลี่ยนรหัสผ่านได้เท่านั้น
- เพิ่มรายวิชาที่ลงทะเบียนเรียน
- Check-in / Check-out กุญแจตามตารางเรียน (In-class)
- ขอจองกุญแจนอกตารางเรียน (Ad-hoc) โดยต้องรออาจารย์อนุมัติ

---

## 4. กติกาเวลา (Time Rules)
### 4.1 หน่วยเวลาในการจอง
- การจองเป็นแบบ **ช่วงเวลา (Time Slot)**
- ความยาวต่อการจองคือ **4 ชั่วโมง ต่อ 1 การจอง**
- สามารถจองติดกันได้สูงสุด **2 รอบต่อเนื่อง** (รวม 8 ชั่วโมง)

### 4.2 การจองล่วงหน้า
- สามารถจองล่วงหน้าได้ไม่เกิน **30 วัน**

### 4.3 การยกเลิกการจอง
- ต้องยกเลิกก่อนเวลาเริ่มใช้งานอย่างน้อย **60 นาที**

### 4.4 Check-in
- สามารถ Check-in ได้ทันทีเมื่อมารับกุญแจ (ไม่จำกัดก่อนเวลา)
- อนุญาตให้ Check-in ช้าสุดไม่เกิน **30 นาทีหลังเวลาเริ่มต้น**
- หากเกิน 30 นาที และไม่ Check-in ระบบจะถือว่าเป็น No-show

### 4.5 Check-out
- สามารถ Check-out ได้ทันทีเมื่อเลิกใช้งาน
- เมื่อ Check-out และคืนกุญแจแล้ว
  - กุญแจจะเปลี่ยนสถานะเป็นว่างทันที
  - หากมีการจองถัดไป สามารถ Check-in ต่อได้ทันที

---

## 5. สถานะการจองและการยืม (State Machine)
สถานะหลักของการจอง/ยืมกุญแจประกอบด้วย

1. **PENDING** – รอการอนุมัติ (เฉพาะ Ad-hoc ของนักศึกษา)
2. **APPROVED** – อนุมัติแล้ว รอ Check-in
3. **REJECTED** – ถูกปฏิเสธ
4. **CHECKED_IN** – รับกุญแจและกำลังใช้งาน
5. **COMPLETED** – Check-out และคืนกุญแจเรียบร้อย
6. **CANCELLED** – ถูกยกเลิกก่อนเริ่มใช้งาน
7. **NO_SHOW** – ไม่มา Check-in ภายในเวลาที่กำหนด

เงื่อนไขการเปลี่ยนสถานะ
- PENDING → APPROVED / REJECTED : Teacher
- APPROVED → CHECKED_IN : Student / Teacher / Staff
- CHECKED_IN → COMPLETED : Student / Teacher / Staff
- APPROVED / PENDING → CANCELLED : ผู้จอง (ก่อนเวลาเริ่ม ≥ 60 นาที)

---

## 6. รูปแบบการใช้งานหลัก (Flow)
### 6.1 In-class (ตามตารางเรียน)
1. Admin กำหนดตารางสอนและผูกห้อง
2. นักศึกษาเพิ่มรายวิชา
3. ระบบเปิดสิทธิ์ Check-in ตามเวลาสอน
4. นักศึกษารับกุญแจ → Check-in → ใช้งาน → Check-out

### 6.2 Ad-hoc (นอกตารางเรียน)
- นักศึกษา
  1. ขอจองกุญแจ
  2. รออาจารย์อนุมัติ
  3. เมื่ออนุมัติแล้วจึง Check-in ได้

- อาจารย์
  - สามารถจองและ Check-in ได้ทันทีโดยไม่ต้องรออนุมัติ

---



